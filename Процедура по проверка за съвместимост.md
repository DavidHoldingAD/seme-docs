# Система за електронен обмен на съобщения (СЕОС)

## Процедура по проверка за съвместимост

### версия 1.1-beta1, март-април 2017

### Държавна агенция "Електронно управление"

### Съдържание

1. [Съдържание](#съдържание)
2. [Версии](#версии)
3. [Въведение](#въведение)
4. [Тестови сценарии](#тестови-сценарии)
   * [Проверка на извличането на Регистъра на участниците](#проверка-на-извличането-на-регистъра-на-участниците)
   * [Проверка на получаването на съобщение](#проверка-на-получаването-на-съобщение)
   * [Проверка на изпращането на съобщение](#проверка-на-изпращането-на-съобщение)

### Версии

* 1.1-beta1 (март-април 2017)
  * Първоначална версия

### Въведение

Настоящият документ описва тестовите сценарии и процедурата по проверка на съвместимостта на системата на участник с електронния обмен на
съобщения.

Проверката за съвместимост се извършва за потвърждаване на готовността на софтуерните решения да обменят съобщения в СЕОС:

* в тестова среда – от производителите на софтуер за обмен на съобщения;
* в продукционна среда – от внедрителите на софтуер за обмен на съобщения.

Тестове в продукционна среда **трябва** да бъдат извършвани **единствено** с тестов участник, освен ако с отсрещната среана изрично не е
уговорено друго.

### Тестови сценарии


### Проверка на извличането на Регистъра на участниците

...

#### Проверка на получаването на съобщение

...
* Липсващ клиентски сертификат
* Клиентският сертификат е невалиден (непознат удостоверител, изтекъл, отменен и т.н.)
* Клиентският сертификат не принадлежи на вписан участник
* Клиентският сертификат принадлежи на неактивен участник
* **(!)** Подаденото съобщение надхвърля максималната големина
* Подаденото съобщение не е валиден XML документ
* Подаденото съобщение не е валидно спрямо XSD схемите за обмен на съобщения
* Получателят на съобщението не съвпада с участника, за който точката отговаря
* Подателят на съобщението не съвпада с участника, определен на база на клиентския сертификат
* Съобщението не е електронно подписано
* Съобщението не е подписано с транспортния сертификат на подателя
* Уникалният идентификатор на съобщението съвпада с вече съществуващо съобщение в базата
* Получаване на съобщения от различен вид:
    * *Броят на проверките за всеки един вид съобщение варира* според възможността на системата да (не) връща съобщение-отговор.
    * "Известие за грешка"
      * Известието касае несъществуващо съобщение
      * Грешка от различен тип:
        * "Вътрешна грешка"
        * "Външна грешка"
    * "Известие за състояние на документ"
      * Известието касае несъществуващ документ
      * Известието за документа с различен статус:
        * "Документът очаква регистрация"
        * "Документът е регистриран"
        * "Работата по документа е прекратена"
        * "Работата по документа е приключена"
        * "Документът не е открит"
        * "Документът вече е получен"
        * "Регистрацията на документа е отказана"
    * "Заявление за регистриране на документ"
      * ...
    * "Заявление за проверка на състоянието на документ"
      * Заявлението касае липсващ документ
      * Заявлението касае документ с различен статус:
        * "Документът очаква регистрация"
        * "Документът е регистриран"
        * "Работата по документа е прекратена"
        * "Работата по документа е приключена"
        * "Документът не е открит"
        * "Документът вече е получен"
        * "Регистрацията на документа е отказана"
...

#### Проверка на изпращането на съобщение

* Изпращане на съобщение от различен вид:
  * "Заявление за регистриране на документ"
    * Документ без файлове в електронния архив
    * Документ с файлове в електронния архив
  * "Заявление за проверка на състоянието на документ"
  * "Известие за състоянието на документ"
  * "Известие за грешка"
* Обработка на резултат при всеки вид изпратено съобщение:
  * Обработка на изключение/грешка
  * Обработка на празно съобщение-отговор
  * Обработка на съобщение-отговор от различен вид:
    * *Обработката трябва да бъде същата като при получаване*, като следните съобщения трябва да се третират като грешка:
      * **(!)** "Заявление за регистриране на документ"
      * **(!)** "Заявление за проверка на състоянието на документ"
...
